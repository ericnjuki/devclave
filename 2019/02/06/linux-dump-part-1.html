<!DOCTYPE html>
<html lang=" en "><head >
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>All My Linux: Part 1 | DevClave</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="All My Linux: Part 1" />
<meta name="author" content="unsuspecting_dev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="There was an attempt (by me) to ‘know linux’. All of my efforts, in all their unedited glory, are hereby chronicled: Contents Coming Soon Disable users list Ubuntu Printing, printing gotchas, printing errors Specific commands" />
<meta property="og:description" content="There was an attempt (by me) to ‘know linux’. All of my efforts, in all their unedited glory, are hereby chronicled: Contents Coming Soon Disable users list Ubuntu Printing, printing gotchas, printing errors Specific commands" />
<link rel="canonical" href="http://localhost:4000/2019/02/06/linux-dump-part-1.html" />
<meta property="og:url" content="http://localhost:4000/2019/02/06/linux-dump-part-1.html" />
<meta property="og:site_name" content="DevClave" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-02-06T18:00:00+03:00" />
<script type="application/ld+json">
{"description":"There was an attempt (by me) to ‘know linux’. All of my efforts, in all their unedited glory, are hereby chronicled: Contents Coming Soon Disable users list Ubuntu Printing, printing gotchas, printing errors Specific commands","author":{"@type":"Person","name":"unsuspecting_dev"},"@type":"BlogPosting","url":"http://localhost:4000/2019/02/06/linux-dump-part-1.html","headline":"All My Linux: Part 1","dateModified":"2019-02-06T18:00:00+03:00","datePublished":"2019-02-06T18:00:00+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/02/06/linux-dump-part-1.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css?1549745034"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="DevClave" /></head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-push-2 wrapper"><header role="banner">
  <nav>
    <h1><a href="/">DevClave</a></h1>
  </nav>
</header><main aria-label="Content">
          <div class="article-content">
  <article>
    <h1>All My Linux: Part 1</h1><span class="article-metadata">Feb 6, 2019</span>
    <!-- <span class="article-metadata">by<span class="by"> unsuspecting_dev</span></span> -->
    <p><span class="dropcaps">T</span>here was an attempt (by me) to ‘know linux’. All of my efforts, in all their unedited glory, are hereby chronicled:</p>
<h3 id="contents">Contents</h3>
<ul>
  <li><a href="#coming-soon">Coming Soon</a></li>
  <li><a href="#disabling-user-list-at-ubuntu-login-screen">Disable users list Ubuntu</a></li>
  <li><a href="#printing">Printing</a>, <a href="#gotchas">printing gotchas</a>, <a href="#errors-you-might-encounter-while-printing">printing errors</a></li>
  <li><a href="#commands">Specific commands</a></li>
</ul>

<h4 id="coming-soon">Coming soon</h4>
<p>basics, more specific commands, scripting, tips and tricks, ssh</p>

<h4 id="disabling-user-list-at-ubuntu-login-screen">Disabling user list at ubuntu login screen</h4>
<p><em>one liner:</em></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s@# \[org\/gnome\/login-screen\]@[org/gnome/login-screen]@'</span> /etc/gdm3/greeter.dconf-defaults <span class="o">&amp;&amp;</span> <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s@# disable-user-list=true@disable-user-list=true@'</span> /etc/gdm3/greeter.dconf-defaults<span class="p">;</span> init 6</code></pre></figure>

<p><em>manually:</em></p>

<p>edit <code class="highlighter-rouge">/etc/gdm3/greeter.dconf-defaults</code> and uncomment the following lines:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">disable-user-list<span class="o">=</span><span class="nb">true</span>

<span class="o">[</span>org/gnome/login-screen]</code></pre></figure>

<p>Then restart</p>

<h3 id="printing">Printing</h3>

<p>The recommended way to print in ubuntu is to use CUPS (Common Unix Printing System) as opposed to the (old) BSD printing system.
You can read more about printing systems <a href="https://www.linuxjournal.com/article/6729">here</a></p>

<p>First you need to install CUPS</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt <span class="nb">install </span>cups</code></pre></figure>

<p>The (old) BSD system uses <code class="highlighter-rouge">lp</code> and <code class="highlighter-rouge">lpr</code> commands to print. Cups has its own mappings of these same commands and it is therefore favorable to use them. You need to install them first:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt <span class="nb">install </span>cups-bsd</code></pre></figure>

<p>You can now print stuff</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># print file with default settings (default printer, queue etc)</span>
lp file

<span class="c"># print to specific printer/queue</span>
lp file <span class="nt">-d</span> &lt;printer-name&gt;/&lt;queue&gt;

<span class="c"># using lpr</span>
lpr file

<span class="c"># specifics</span>
lpr file <span class="nt">-P</span> &lt;printer-name&gt;/&lt;queue&gt;</code></pre></figure>

<!-- TODO: difference between lp and lpr -->
<h4 id="gotchas">Gotchas</h4>
<ul>
  <li>
    <p><code class="highlighter-rouge">lp</code> and <code class="highlighter-rouge">lpr</code> can only print PDF, ps (PostSript) and plain text files</p>
  </li>
  <li>
    <p>It is not possible to use <code class="highlighter-rouge">lp</code> or <code class="highlighter-rouge">lpr</code> to print to a printer directly using its IP</p>
  </li>
  <li>
    <p>Also, if you don’t know what your printer name is, you can find this and more printing commands at the <a href="#printing-commands">commands section</a> of this page.</p>
  </li>
  <li>
    <p>I don’t know difference between <code class="highlighter-rouge">lp</code> and <code class="highlighter-rouge">lpr</code> for now…</p>
  </li>
  <li>
    <p>Here’s also some stuff I ended up installing while trying to get printing to work:</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt <span class="nb">install </span>cups-filters libstdc++5:i386</code></pre></figure>

<h4 id="errors-you-might-encounter-while-printing">errors you might encounter while printing:</h4>
<h6 id="not-printing">not printing</h6>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># clear /var/spool/cups</span>
<span class="nb">rm</span> <span class="nt">-rf</span> /var/spool/cups/<span class="k">*</span></code></pre></figure>

<h6 id="lp-and-lpr-not-working"><code class="highlighter-rouge">lp</code> and <code class="highlighter-rouge">lpr</code> not working</h6>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># install cups-bsd "This package provides the BSD commands for interacting with CUPS: </span>
<span class="c"># /usr/bin/lpqa /usr/bin/lpr /usr/bin/lprm /usr/sbin/lpc"</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>cups-bsd</code></pre></figure>

<h5 id="none-of-these-have-solved-my-problems">none of these have solved my problems</h5>
<p>Look <a href="https://wiki.ubuntu.com/DebuggingPrintingProblems">here</a> (official ubuntu page on debugging printing problems)</p>

<h3 id="accessing-another-computer-remotely">Accessing another computer remotely</h3>

<h4 id="using-ssh-passwordless-ssh-login">using ssh (passwordless ssh login)</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># solution 1: one-liner</span>
sshpass <span class="nt">-p</span> <span class="s1">'password'</span> ssh user@host</code></pre></figure>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># solution 2: safer</span>
<span class="c"># 1 create ~/.ssh on target PC if it does not exist</span>
ssh user@host <span class="nb">mkdir</span> <span class="nt">-p</span> .ssh <span class="c"># enter password</span>

<span class="c"># 2 exit and generate private/public key pair on your pc</span>
ssh-keygen <span class="nt">-t</span> rsa

<span class="c"># 3 copy your generated public key to the authorized_keys file in .ssh folder of host</span>
<span class="nb">cat</span> .ssh/public_key.pub | ssh user@host <span class="s1">'cat &gt;&gt; .ssh/authorized_keys'</span>

<span class="c"># 4 set permissions on host .ssh folder and authorized_keys file</span>
ssh user@host <span class="s2">"chmod 700 .ssh; chmod 640 .ssh/authorized_keys"</span>

<span class="c"># 2.5 OR, after generating the key in step 2, just do this which will do step 3 and 4 for you</span>
ssh-copy-id user@host <span class="c"># enter password</span>

<span class="c"># 2.5 OR if your server uses custom port no:</span>
ssh-copy-id <span class="s2">"user@host -p 1234"</span></code></pre></figure>

<p>..aand you’re done, you can now login to the remote without having to input password with:
ssh user@host</p>

<h4 id="ssh-errors">ssh errors</h4>
<p>-Attempting to ssh into windows:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Unable to negotiate with &lt;IP&gt; port 22: no matching cipher found. Their offer: aes128-cbc,3des-cbc,aes192-cbc,aes256-cbc"
</code></pre></div></div>

<p>-FIX:
check which ciphers your client supports:</p>

<p><code class="highlighter-rouge">ssh -Q cipher</code></p>

<p>if any of the ciphers are also supported by the server (Their offer: …), then you can force the use of those specific ciphers:</p>

<p><code class="highlighter-rouge">ssh -c aes256-cbc usr@host</code></p>

<h3 id="scripting">Scripting</h3>

<h3 id="little-things">Little things</h3>
<h5 id="running-gedit-in-the-background-from-terminal">Running gedit in the background from terminal</h5>
<p><code class="highlighter-rouge">gedit &amp;</code><br />
OR<br />
<code class="highlighter-rouge">setsid gedit # runs a program in a new session</code></p>

<h5 id="make-ubuntu-say-things">Make Ubuntu say things</h5>
<p><code class="highlighter-rouge">sudo apt install gnustep-gui-runtime</code>
<code class="highlighter-rouge">say "You can't handle the truth"</code></p>

<h5 id="check-linux-distro">Check linux distro</h5>
<p><code class="highlighter-rouge">python -mplatform | grep -iw KEYWORD # KEYWORD could be 'ubuntu' or 'opensuse' etc</code></p>

<h5 id="get-ip-address-and-hostname">Get IP address and hostname</h5>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">hostname</span> <span class="c"># prints hostname</span>

<span class="nb">hostname</span> <span class="nt">-I</span> <span class="c"># prints IP address</span>

<span class="c"># if the above (for IP) doesn't work e.g. in OpenSUSE, try this:</span>
ifconfig <span class="nt">-a</span> | <span class="nb">grep</span> <span class="nt">-iw</span> inet | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'127.0.0.1'</span> | <span class="nb">awk</span> <span class="s1">'{ print $2}'</span> | <span class="nb">cut</span> <span class="nt">-f2-</span> <span class="nt">-d</span>:

<span class="c"># let's deconstruct that...</span>

ifconfig <span class="nt">-a</span> <span class="c"># gives a whole bunch of info related to currently connected network devices</span>

<span class="c"># '|' pipes (sends) the output of ifconfig -a to the next command:</span>
<span class="nb">grep</span> <span class="nt">-iw</span> inet 
<span class="c"># returns every line that has 'inet' in it. </span>
<span class="c"># -i = case-insensitive match (openSUSE gives its result in all caps, ubuntu does not)</span>
<span class="c"># -w = exact word match (otherwise grep matches things like inet6 or inetBLA which lie outside our interest)</span>

<span class="c"># the resulting lines get piped to:</span>
<span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'127.0.0.1'</span> 
<span class="c"># grep -v is a reverse match i.e "return all lines that DO NOT have this"</span>
<span class="c"># '127.0.0.1' is... I forgot what's special about it, but we don't want it (TODO)</span>

<span class="c"># i forgot what the awk does also... (TODO)</span>
<span class="c"># ok so after the awk command, the result looks something like this:</span>

addr: X.X.X.X

<span class="c"># so we want to remove the 'addr: ' part which is why we pipe that result to cut:</span>
<span class="nb">cut</span> <span class="nt">-f2-</span> <span class="nt">-d</span>:
<span class="c"># read about the cut in the commands section below, but this cut splits its input into 2 fields</span>
<span class="c"># using a colon ':' as the delimiter and returns the second field (the part after the colon, which is the actual IP):</span>
X.X.X.X</code></pre></figure>

<h5 id="open-a-file-in-notepad-using-cmd">Open a file in notepad++ using cmd</h5>
<p><code class="highlighter-rouge">start notepad++ &lt;filename&gt;</code></p>

<h5 id="copy-files-to-ftp-server-in-windows">Copy files to ftp server in windows</h5>
<p>-you can map a network location to a local drive in windows by going to THIS PC &gt; Map network drive
-this would allow you to upload files to an ftp server if you map one. (why? because browsers have limited ftp support and can only download but not upload; other than browsers you’d need a 3rd party ftp client to upload to an ftp server)</p>

<h2 id="commands">Commands</h2>
<h3 id="packages-commands">Packages Commands</h3>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># remove packages (and uneeded dependencies):</span>
<span class="nb">sudo </span>apt-get remove <span class="nt">--auto-remove</span> package-name

<span class="c"># list all packages manually (intentionally) installed:</span>
<span class="o">(</span>zcat <span class="k">$(</span><span class="nb">ls</span> <span class="nt">-tr</span> /var/log/apt/history.log<span class="k">*</span>.gz<span class="k">)</span><span class="p">;</span> <span class="nb">cat</span> /var/log/apt/history.log<span class="o">)</span> 2&gt;/dev/null |
  egrep <span class="s1">'^(Start-Date:|Commandline:)'</span> |
  <span class="nb">grep</span> <span class="nt">-v</span> aptdaemon |
  egrep <span class="s1">'^Commandline:'</span>

<span class="c"># search package</span>
apt-cache search keyword
<span class="c"># or</span>
apt search keyword
<span class="c"># (TODO: difference?)</span></code></pre></figure>

<h3 id="printing-commands">Printing Commands</h3>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># print</span>
lp file <span class="o">[</span><span class="nt">-d</span> &lt;printer-alias&gt;/&lt;queue&gt;]

<span class="c"># or</span>
lpr file <span class="o">[</span><span class="nt">-P</span> &lt;printer-alias&gt;/&lt;queue&gt;]

<span class="c"># hasn't worked for me...</span>
<span class="nb">cat </span>you_file.prn | netcat <span class="nt">-w</span> 1 printer_ip 9100

<span class="c"># checking info about printers</span>
lpq <span class="o">(</span><span class="nt">-P</span> printer_alias<span class="o">)</span> <span class="c"># check printing queue</span>

lprm <span class="c"># remove jobs from queue (that haven't been processed)</span>

lpstat <span class="nt">-p</span> <span class="nt">-d</span> <span class="c"># will list all the available printers.</span>

lpinfo <span class="nt">-v</span> <span class="c"># find out if your printer is detected by cups</span></code></pre></figure>

<h3 id="file-management">File management</h3>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> /path/to/go/to <span class="c"># change directory to path</span>

<span class="nb">ls</span> <span class="c"># list files+folders in a directory</span>

<span class="nb">cp </span>from/here to/here <span class="c"># copy</span>

<span class="nb">mv </span>from/here to/here <span class="c"># move/rename file</span>

<span class="c"># to move multiple files, you can use wildcards:</span>
<span class="nb">mv</span> <span class="k">*</span>IDENTIFIER<span class="k">*</span> destination 
<span class="c"># will move myIDENTIFIER, IDENTIFIERofmine </span>
<span class="c"># i.e. zero or more characters, followed by IDENTIFIER, </span>
<span class="c"># followed by zero or more characters to destination</span>

<span class="c"># OR you can use -t flag to set destination:</span>
<span class="nb">mv</span> <span class="nt">-t</span> DESTINATION file1 file2 file3</code></pre></figure>

<h3 id="cat">cat</h3>
<p>short for conCATenate</p>

<p>can:
-display file contents:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cat </span>file

<span class="nb">cat</span> <span class="nt">-n</span> file <span class="c">#print line numbers</span>

<span class="nb">cat</span> <span class="nt">-s</span> file <span class="c">#omit repeated empty lines</span>

<span class="nb">cat</span> <span class="nt">-T</span> file <span class="c">#display 'tab' character as ^I (to distinguish them from space)</span>

<span class="nb">cat</span> <span class="nt">-e</span> file <span class="c">#display end of line as $</span></code></pre></figure>

<p>-copy file contents (you can use cp for this though)</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cat </span>file <span class="o">&gt;</span> file2 <span class="c">#if file2 exists it will be overwritten with file's contents</span></code></pre></figure>

<p>-concatenate (of course)</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cat </span>file file2 <span class="c">#concats contents of both files and prints result on console</span></code></pre></figure>

<p>-create files</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cat</span> <span class="o">&gt;</span> fileX
<span class="c"># will create a new fileX, and give you the opportunity to write the contents of fileX. Once you are done, CTRL+D will save the file</span></code></pre></figure>

<p>–you can use <code class="highlighter-rouge">&gt;&gt;</code> in place of <code class="highlighter-rouge">&gt;</code> to append to a file rather than overwrite it<br />
– <code class="highlighter-rouge">&gt;&gt;</code> can also be used to create files</p>

<h3 id="ssh">ssh</h3>
<p>-List files in remote without logging in:<br />
<code class="highlighter-rouge">ssh user@host ls path/to/directory</code></p>

<p>-Copy files to and from remote using ssh:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">scp file remoteuser@remoteserver:path <span class="c"># from local to remote</span>

scp remoteuser@remoteserver:path/to/file destination <span class="c"># from remote to local</span>

scp <span class="o">[</span><span class="nt">-r</span><span class="o">]</span> <span class="k">*</span> remoteuser@remoteserver:path <span class="c"># copy all (can copy directories)</span></code></pre></figure>

<p>-Create/Edit files in remote (using vim)
<code class="highlighter-rouge">vi scp://user@host:22//home/user/Documents/file1</code></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># there are two slashes after the port number, 22 (which you can exclude btw) because the second one
# stands for root directory
</code></pre></div></div>

  </article>
</div>
        </main>

      </div>
    </div><footer>
    <!--<ul><li><a href="https://github.com/devclave"><svg class="svg-icon"><use xlink:href="/assets/icons/minima-social-icons.svg#github"></use></svg> <span class="username">devclave</span></a></li><li><a href="https://www.twitter.com/devclave"><svg class="svg-icon"><use xlink:href="/assets/icons/minima-social-icons.svg#twitter"></use></svg> <span class="username">devclave</span></a></li></ul>
-->
    <!-- <a class="typical-link" href="/feed.xml">subscribe via RSS</a> -->
    <svg class="svg-icon"><use xlink:href="/assets/icons/minima-social-icons.svg#twitter"></use></svg> 
    <a class="typical-link" href="https://www.twitter.com/devclave">devclave</a>
    <svg class="svg-icon"><use xlink:href="/assets/icons/minima-social-icons.svg#github"></use></svg>
    <a class="typical-link" href="https://github.com/devclave">devclave</a>
    <a class="typical-link" style="margin-left: 2em;" href="/about">about</a> 
    <p>copyright ( ͡° ͜ʖ ͡°) 2019 devclave</p>
</footer></div>
</body>

</html>